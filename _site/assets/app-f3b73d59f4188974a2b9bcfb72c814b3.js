!function(t){"use strict";t.fn.fitVids=function(e){var r={customSelector:null},n=document.createElement("div"),o=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0];return n.className="fit-vids-style",n.innerHTML="&shy;<style>               .fluid-width-video-wrapper {                 width: 100%;                              position: relative;                       padding: 0;                            }                                                                                   .fluid-width-video-wrapper iframe,        .fluid-width-video-wrapper object,        .fluid-width-video-wrapper embed {           position: absolute;                       top: 0;                                   left: 0;                                  width: 100%;                              height: 100%;                          }                                       </style>",o.parentNode.insertBefore(n,o),e&&t.extend(r,e),this.each(function(){var e=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com']","object","embed"];r.customSelector&&e.push(r.customSelector);var n=t(this).find(e.join(","));n.each(function(){var e=t(this);if(!("embed"===this.tagName.toLowerCase()&&e.parent("object").length||e.parent(".fluid-width-video-wrapper").length)){var r="object"===this.tagName.toLowerCase()||e.attr("height")&&!isNaN(parseInt(e.attr("height"),10))?parseInt(e.attr("height"),10):e.height(),n=isNaN(parseInt(e.attr("width"),10))?e.width():parseInt(e.attr("width"),10),o=r/n;if(!e.attr("id")){var i="fitvid"+Math.floor(999999*Math.random());e.attr("id",i)}e.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*o+"%"),e.removeAttr("height").removeAttr("width")}})})}}(jQuery),$(".video-pusher").fitVids(),$(".toggleNav").on("click",function(){$(".mobile-nav").toggleClass("MenuIsOpen")}),$(".toggleTopBar").on("click",function(){$("body").toggleClass("BarShow")});var lunr=function(t){var e=new lunr.Index;return e.pipeline.add(lunr.stopWordFilter,lunr.stemmer),t&&t.call(e,e),e};lunr.version="0.4.1","undefined"!=typeof module&&(module.exports=lunr),lunr.utils={},lunr.utils.warn=function(t){return function(e){t.console&&console.warn&&console.warn(e)}}(this),lunr.utils.zeroFillArray=function(){var t=[0];return function(e){for(;e>t.length;)t=t.concat(t);return t.slice(0,e)}}(),lunr.EventEmitter=function(){this.events={}},lunr.EventEmitter.prototype.addListener=function(){var t=Array.prototype.slice.call(arguments),e=t.pop(),r=t;if("function"!=typeof e)throw new TypeError("last argument must be a function");r.forEach(function(t){this.hasHandler(t)||(this.events[t]=[]),this.events[t].push(e)},this)},lunr.EventEmitter.prototype.removeListener=function(t,e){if(this.hasHandler(t)){var r=this.events[t].indexOf(e);this.events[t].splice(r,1),this.events[t].length||delete this.events[t]}},lunr.EventEmitter.prototype.emit=function(t){if(this.hasHandler(t)){var e=Array.prototype.slice.call(arguments,1);this.events[t].forEach(function(t){t.apply(void 0,e)})}},lunr.EventEmitter.prototype.hasHandler=function(t){return t in this.events},lunr.tokenizer=function(t){if(!t)return[];if(Array.isArray(t))return t.map(function(t){return t.toLowerCase()});for(var t=t.replace(/^\s+/,""),e=t.length-1;e>=0;e--)if(/\S/.test(t.charAt(e))){t=t.substring(0,e+1);break}return t.split(/\s+/).map(function(t){return t.replace(/^\W+/,"").replace(/\W+$/,"").toLowerCase()})},lunr.Pipeline=function(){this._stack=[]},lunr.Pipeline.registeredFunctions={},lunr.Pipeline.registerFunction=function(t,e){e in this.registeredFunctions&&lunr.utils.warn("Overwriting existing registered function: "+e),t.label=e,lunr.Pipeline.registeredFunctions[t.label]=t},lunr.Pipeline.warnIfFunctionNotRegistered=function(t){var e=t.label&&t.label in this.registeredFunctions;e||lunr.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",t)},lunr.Pipeline.load=function(t){var e=new lunr.Pipeline;return t.forEach(function(t){var r=lunr.Pipeline.registeredFunctions[t];if(!r)throw Error("Cannot load un-registered function: "+t);e.add(r)}),e},lunr.Pipeline.prototype.add=function(){var t=Array.prototype.slice.call(arguments);t.forEach(function(t){lunr.Pipeline.warnIfFunctionNotRegistered(t),this._stack.push(t)},this)},lunr.Pipeline.prototype.after=function(t,e){lunr.Pipeline.warnIfFunctionNotRegistered(e);var r=this._stack.indexOf(t)+1;this._stack.splice(r,0,e)},lunr.Pipeline.prototype.before=function(t,e){lunr.Pipeline.warnIfFunctionNotRegistered(e);var r=this._stack.indexOf(t);this._stack.splice(r,0,e)},lunr.Pipeline.prototype.remove=function(t){var e=this._stack.indexOf(t);this._stack.splice(e,1)},lunr.Pipeline.prototype.run=function(t){for(var e=[],r=t.length,n=this._stack.length,o=0;r>o;o++){for(var i=t[o],s=0;n>s&&(i=this._stack[s](i,o,t),void 0!==i);s++);void 0!==i&&e.push(i)}return e},lunr.Pipeline.prototype.toJSON=function(){return this._stack.map(function(t){return lunr.Pipeline.warnIfFunctionNotRegistered(t),t.label})},lunr.Vector=function(t){this.elements=t},lunr.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;for(var t,e=0,r=this.elements,n=r.length,o=0;n>o;o++)t=r[o],e+=t*t;return this._magnitude=Math.sqrt(e)},lunr.Vector.prototype.dot=function(t){for(var e=this.elements,r=t.elements,n=e.length,o=0,i=0;n>i;i++)o+=e[i]*r[i];return o},lunr.Vector.prototype.similarity=function(t){return this.dot(t)/(this.magnitude()*t.magnitude())},lunr.Vector.prototype.toArray=function(){return this.elements},lunr.SortedSet=function(){this.length=0,this.elements=[]},lunr.SortedSet.load=function(t){var e=new this;return e.elements=t,e.length=t.length,e},lunr.SortedSet.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(t){~this.indexOf(t)||this.elements.splice(this.locationFor(t),0,t)},this),this.length=this.elements.length},lunr.SortedSet.prototype.toArray=function(){return this.elements.slice()},lunr.SortedSet.prototype.map=function(t,e){return this.elements.map(t,e)},lunr.SortedSet.prototype.forEach=function(t,e){return this.elements.forEach(t,e)},lunr.SortedSet.prototype.indexOf=function(t,e,r){var e=e||0,r=r||this.elements.length,n=r-e,o=e+Math.floor(n/2),i=this.elements[o];return 1>=n?i===t?o:-1:t>i?this.indexOf(t,o,r):i>t?this.indexOf(t,e,o):i===t?o:void 0},lunr.SortedSet.prototype.locationFor=function(t,e,r){var e=e||0,r=r||this.elements.length,n=r-e,o=e+Math.floor(n/2),i=this.elements[o];if(1>=n){if(i>t)return o;if(t>i)return o+1}return t>i?this.locationFor(t,o,r):i>t?this.locationFor(t,e,o):void 0},lunr.SortedSet.prototype.intersect=function(t){for(var e=new lunr.SortedSet,r=0,n=0,o=this.length,i=t.length,s=this.elements,a=t.elements;!(r>o-1||n>i-1);)s[r]!==a[n]?s[r]<a[n]?r++:s[r]>a[n]&&n++:(e.add(s[r]),r++,n++);return e},lunr.SortedSet.prototype.clone=function(){var t=new lunr.SortedSet;return t.elements=this.toArray(),t.length=t.elements.length,t},lunr.SortedSet.prototype.union=function(t){var e,r,n;return this.length>=t.length?(e=this,r=t):(e=t,r=this),n=e.clone(),n.add.apply(n,r.toArray()),n},lunr.SortedSet.prototype.toJSON=function(){return this.toArray()},lunr.Index=function(){this._fields=[],this._ref="id",this.pipeline=new lunr.Pipeline,this.documentStore=new lunr.Store,this.tokenStore=new lunr.TokenStore,this.corpusTokens=new lunr.SortedSet,this.eventEmitter=new lunr.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},lunr.Index.prototype.on=function(){var t=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,t)},lunr.Index.prototype.off=function(t,e){return this.eventEmitter.removeListener(t,e)},lunr.Index.load=function(t){t.version!==lunr.version&&lunr.utils.warn("version mismatch: current "+lunr.version+" importing "+t.version);var e=new this;return e._fields=t.fields,e._ref=t.ref,e.documentStore=lunr.Store.load(t.documentStore),e.tokenStore=lunr.TokenStore.load(t.tokenStore),e.corpusTokens=lunr.SortedSet.load(t.corpusTokens),e.pipeline=lunr.Pipeline.load(t.pipeline),e},lunr.Index.prototype.field=function(t,e){var e=e||{},r={name:t,boost:e.boost||1};return this._fields.push(r),this},lunr.Index.prototype.ref=function(t){return this._ref=t,this},lunr.Index.prototype.add=function(t,e){var r={},n=new lunr.SortedSet,o=t[this._ref],e=void 0===e?!0:e;this._fields.forEach(function(e){var o=this.pipeline.run(lunr.tokenizer(t[e.name]));r[e.name]=o,lunr.SortedSet.prototype.add.apply(n,o)},this),this.documentStore.set(o,n),lunr.SortedSet.prototype.add.apply(this.corpusTokens,n.toArray());for(var i=0;n.length>i;i++){var s=n.elements[i],a=this._fields.reduce(function(t,e){var n=r[e.name].length;if(!n)return t;var o=r[e.name].filter(function(t){return t===s}).length;return t+o/n*e.boost},0);this.tokenStore.add(s,{ref:o,tf:a})}e&&this.eventEmitter.emit("add",t,this)},lunr.Index.prototype.remove=function(t,e){var r=t[this._ref],e=void 0===e?!0:e;if(this.documentStore.has(r)){var n=this.documentStore.get(r);this.documentStore.remove(r),n.forEach(function(t){this.tokenStore.remove(t,r)},this),e&&this.eventEmitter.emit("remove",t,this)}},lunr.Index.prototype.update=function(t,e){var e=void 0===e?!0:e;this.remove(t,!1),this.add(t,!1),e&&this.eventEmitter.emit("update",t,this)},lunr.Index.prototype.idf=function(t){if(this._idfCache[t])return this._idfCache[t];var e=this.tokenStore.count(t),r=1;return e>0&&(r=1+Math.log(this.tokenStore.length/e)),this._idfCache[t]=r},lunr.Index.prototype.search=function(t){var e=this.pipeline.run(lunr.tokenizer(t)),r=lunr.utils.zeroFillArray(this.corpusTokens.length),n=[],o=this._fields.reduce(function(t,e){return t+e.boost},0),i=e.some(function(t){return this.tokenStore.has(t)},this);if(!i)return[];e.forEach(function(t,e,i){var s=1/i.length*this._fields.length*o,a=this,u=this.tokenStore.expand(t).reduce(function(e,n){var o=a.corpusTokens.indexOf(n),i=a.idf(n),u=1,l=new lunr.SortedSet;if(n!==t){var h=Math.max(3,n.length-t.length);u=1/Math.log(h)}return o>-1&&(r[o]=s*i*u),Object.keys(a.tokenStore.get(n)).forEach(function(t){l.add(t)}),e.union(l)},new lunr.SortedSet);n.push(u)},this);var s=n.reduce(function(t,e){return t.intersect(e)}),a=new lunr.Vector(r);return s.map(function(t){return{ref:t,score:a.similarity(this.documentVector(t))}},this).sort(function(t,e){return e.score-t.score})},lunr.Index.prototype.documentVector=function(t){for(var e=this.documentStore.get(t),r=e.length,n=lunr.utils.zeroFillArray(this.corpusTokens.length),o=0;r>o;o++){var i=e.elements[o],s=this.tokenStore.get(i)[t].tf,a=this.idf(i);n[this.corpusTokens.indexOf(i)]=s*a}return new lunr.Vector(n)},lunr.Index.prototype.toJSON=function(){return{version:lunr.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},lunr.Store=function(){this.store={},this.length=0},lunr.Store.load=function(t){var e=new this;return e.length=t.length,e.store=Object.keys(t.store).reduce(function(e,r){return e[r]=lunr.SortedSet.load(t.store[r]),e},{}),e},lunr.Store.prototype.set=function(t,e){this.store[t]=e,this.length=Object.keys(this.store).length},lunr.Store.prototype.get=function(t){return this.store[t]},lunr.Store.prototype.has=function(t){return t in this.store},lunr.Store.prototype.remove=function(t){this.has(t)&&(delete this.store[t],this.length--)},lunr.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},lunr.stemmer=function(){var t={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},e={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},r="[^aeiou]",n="[aeiouy]",o=r+"[^aeiouy]*",i=n+"[aeiou]*",s="^("+o+")?"+i+o,a="^("+o+")?"+i+o+"("+i+")?$",u="^("+o+")?"+i+o+i+o,l="^("+o+")?"+n;return function(r){var i,h,c,p,d,f,m;if(3>r.length)return r;if(c=r.substr(0,1),"y"==c&&(r=c.toUpperCase()+r.substr(1)),p=/^(.+?)(ss|i)es$/,d=/^(.+?)([^s])s$/,p.test(r)?r=r.replace(p,"$1$2"):d.test(r)&&(r=r.replace(d,"$1$2")),p=/^(.+?)eed$/,d=/^(.+?)(ed|ing)$/,p.test(r)){var g=p.exec(r);p=RegExp(s),p.test(g[1])&&(p=/.$/,r=r.replace(p,""))}else if(d.test(r)){var g=d.exec(r);i=g[1],d=RegExp(l),d.test(i)&&(r=i,d=/(at|bl|iz)$/,f=RegExp("([^aeiouylsz])\\1$"),m=RegExp("^"+o+n+"[^aeiouwxy]$"),d.test(r)?r+="e":f.test(r)?(p=/.$/,r=r.replace(p,"")):m.test(r)&&(r+="e"))}if(p=/^(.+?)y$/,p.test(r)){var g=p.exec(r);i=g[1],p=RegExp(l),p.test(i)&&(r=i+"i")}if(p=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,p.test(r)){var g=p.exec(r);i=g[1],h=g[2],p=RegExp(s),p.test(i)&&(r=i+t[h])}if(p=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,p.test(r)){var g=p.exec(r);i=g[1],h=g[2],p=RegExp(s),p.test(i)&&(r=i+e[h])}if(p=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,d=/^(.+?)(s|t)(ion)$/,p.test(r)){var g=p.exec(r);i=g[1],p=RegExp(u),p.test(i)&&(r=i)}else if(d.test(r)){var g=d.exec(r);i=g[1]+g[2],d=RegExp(u),d.test(i)&&(r=i)}if(p=/^(.+?)e$/,p.test(r)){var g=p.exec(r);i=g[1],p=RegExp(u),d=RegExp(a),f=RegExp("^"+o+n+"[^aeiouwxy]$"),(p.test(i)||d.test(i)&&!f.test(i))&&(r=i)}return p=/ll$/,d=RegExp(u),p.test(r)&&d.test(r)&&(p=/.$/,r=r.replace(p,"")),"y"==c&&(r=c.toLowerCase()+r.substr(1)),r}}(),lunr.Pipeline.registerFunction(lunr.stemmer,"stemmer"),lunr.stopWordFilter=function(t){return-1===lunr.stopWordFilter.stopWords.indexOf(t)?t:void 0},lunr.stopWordFilter.stopWords=new lunr.SortedSet,lunr.stopWordFilter.stopWords.length=119,lunr.stopWordFilter.stopWords.elements=["","a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"],lunr.Pipeline.registerFunction(lunr.stopWordFilter,"stopWordFilter"),lunr.TokenStore=function(){this.root={docs:{}},this.length=0},lunr.TokenStore.load=function(t){var e=new this;return e.root=t.root,e.length=t.length,e},lunr.TokenStore.prototype.add=function(t,e,r){var r=r||this.root,n=t[0],o=t.slice(1);return n in r||(r[n]={docs:{}}),0===o.length?(r[n].docs[e.ref]=e,void(this.length+=1)):this.add(o,e,r[n])},lunr.TokenStore.prototype.has=function(t){if(!t)return!1;for(var e=this.root,r=0;t.length>r;r++){if(!e[t[r]])return!1;e=e[t[r]]}return!0},lunr.TokenStore.prototype.getNode=function(t){if(!t)return{};for(var e=this.root,r=0;t.length>r;r++){if(!e[t[r]])return{};e=e[t[r]]}return e},lunr.TokenStore.prototype.get=function(t,e){return this.getNode(t,e).docs||{}},lunr.TokenStore.prototype.count=function(t,e){return Object.keys(this.get(t,e)).length},lunr.TokenStore.prototype.remove=function(t,e){if(t){for(var r=this.root,n=0;t.length>n;n++){if(!(t[n]in r))return;r=r[t[n]]}delete r.docs[e]}},lunr.TokenStore.prototype.expand=function(t,e){var r=this.getNode(t),n=r.docs||{},e=e||[];return Object.keys(n).length&&e.push(t),Object.keys(r).forEach(function(r){"docs"!==r&&e.concat(this.expand(t+r,e))},this),e},lunr.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},function(t,e){if("object"==typeof exports&&exports)e(exports);else{var r={};e(r),"function"==typeof define&&define.amd?define(r):t.Mustache=r}}(this,function(t){function e(t,e){return b.call(t,e)}function r(t){return!e(m,t)}function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(t){return String(t).replace(/[&<>"'\/]/g,function(t){return S[t]})}function i(t){this.string=t,this.tail=t,this.pos=0}function s(t,e){this.view=t||{},this.parent=e,this._cache={}}function a(){this.clearCache()}function u(e,r,n,o){for(var i,s,a,l="",h=0,c=e.length;c>h;++h)switch(i=e[h],s=i[1],i[0]){case"#":if(a=n.lookup(s),"object"==typeof a)if(w(a))for(var p=0,d=a.length;d>p;++p)l+=u(i[4],r,n.push(a[p]),o);else a&&(l+=u(i[4],r,n.push(a),o));else if("function"==typeof a){var f=null==o?null:o.slice(i[3],i[5]);a=a.call(n.view,f,function(t){return r.render(t,n)}),null!=a&&(l+=a)}else a&&(l+=u(i[4],r,n,o));break;case"^":a=n.lookup(s),(!a||w(a)&&0===a.length)&&(l+=u(i[4],r,n,o));break;case">":a=r.getPartial(s),"function"==typeof a&&(l+=a(n));break;case"&":a=n.lookup(s),null!=a&&(l+=a);break;case"name":a=n.lookup(s),null!=a&&(l+=t.escape(a));break;case"text":l+=s}return l}function l(t){for(var e,r=[],n=r,o=[],i=0,s=t.length;s>i;++i)switch(e=t[i],e[0]){case"#":case"^":o.push(e),n.push(e),n=e[4]=[];break;case"/":var a=o.pop();a[5]=e[2],n=o.length>0?o[o.length-1][4]:r;break;default:n.push(e)}return r}function h(t){for(var e,r,n=[],o=0,i=t.length;i>o;++o)e=t[o],e&&("text"===e[0]&&r&&"text"===r[0]?(r[1]+=e[1],r[3]=e[3]):(r=e,n.push(e)));return n}function c(t){return[new RegExp(n(t[0])+"\\s*"),new RegExp("\\s*"+n(t[1]))]}function p(e,o){function s(){if(k&&!O)for(;T.length;)delete x[T.pop()];else T=[];k=!1,O=!1}if(e=e||"",o=o||t.tags,"string"==typeof o&&(o=o.split(f)),2!==o.length)throw new Error("Invalid tags: "+o.join(", "));for(var a,u,p,m,b,_=c(o),w=new i(e),S=[],x=[],T=[],k=!1,O=!1;!w.eos();){if(a=w.pos,p=w.scanUntil(_[0]))for(var F=0,E=p.length;E>F;++F)m=p.charAt(F),r(m)?T.push(x.length):O=!0,x.push(["text",m,a,a+1]),a+=1,"\n"==m&&s();if(!w.scan(_[0]))break;if(k=!0,u=w.scan(y)||"name",w.scan(d),"="===u?(p=w.scanUntil(g),w.scan(g),w.scanUntil(_[1])):"{"===u?(p=w.scanUntil(new RegExp("\\s*"+n("}"+o[1]))),w.scan(v),w.scanUntil(_[1]),u="&"):p=w.scanUntil(_[1]),!w.scan(_[1]))throw new Error("Unclosed tag at "+w.pos);if(b=[u,p,a,w.pos],x.push(b),"#"===u||"^"===u)S.push(b);else if("/"===u){if(0===S.length)throw new Error('Unopened section "'+p+'" at '+a);var C=S.pop();if(C[1]!==p)throw new Error('Unclosed section "'+C[1]+'" at '+a)}else if("name"===u||"{"===u||"&"===u)O=!0;else if("="===u){if(o=p.split(f),2!==o.length)throw new Error("Invalid tags at "+a+": "+o.join(", "));_=c(o)}}var C=S.pop();if(C)throw new Error('Unclosed section "'+C[1]+'" at '+w.pos);return x=h(x),l(x)}var d=/\s*/,f=/\s+/,m=/\S/,g=/\s*=/,v=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/,b=RegExp.prototype.test,_=Object.prototype.toString,w=Array.isArray||function(t){return"[object Array]"===_.call(t)},S={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};i.prototype.eos=function(){return""===this.tail},i.prototype.scan=function(t){var e=this.tail.match(t);return e&&0===e.index?(this.tail=this.tail.substring(e[0].length),this.pos+=e[0].length,e[0]):""},i.prototype.scanUntil=function(t){var e,r=this.tail.search(t);switch(r){case-1:e=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,r),this.tail=this.tail.substring(r),this.pos+=r}return e},s.make=function(t){return t instanceof s?t:new s(t)},s.prototype.push=function(t){return new s(t,this)},s.prototype.lookup=function(t){var e=this._cache[t];if(!e){if("."==t)e=this.view;else for(var r=this;r;){if(t.indexOf(".")>0){e=r.view;for(var n=t.split("."),o=0;e&&o<n.length;)e=e[n[o++]]}else e=r.view[t];if(null!=e)break;r=r.parent}this._cache[t]=e}return"function"==typeof e&&(e=e.call(this.view)),e},a.prototype.clearCache=function(){this._cache={},this._partialCache={}},a.prototype.compile=function(e,r){var n=this._cache[e];if(!n){var o=t.parse(e,r);n=this._cache[e]=this.compileTokens(o,e)}return n},a.prototype.compilePartial=function(t,e,r){var n=this.compile(e,r);return this._partialCache[t]=n,n},a.prototype.getPartial=function(t){return t in this._partialCache||!this._loadPartial||this.compilePartial(t,this._loadPartial(t)),this._partialCache[t]},a.prototype.compileTokens=function(t,e){var r=this;return function(n,o){if(o)if("function"==typeof o)r._loadPartial=o;else for(var i in o)r.compilePartial(i,o[i]);return u(t,r,s.make(n),e)}},a.prototype.render=function(t,e,r){return this.compile(t)(e,r)},t.name="mustache.js",t.version="0.7.2",t.tags=["{{","}}"],t.Scanner=i,t.Context=s,t.Writer=a,t.parse=p,t.escape=o;var x=new a;t.clearCache=function(){return x.clearCache()},t.compile=function(t,e){return x.compile(t,e)},t.compilePartial=function(t,e,r){return x.compilePartial(t,e,r)},t.compileTokens=function(t,e){return x.compileTokens(t,e)},t.render=function(t,e,r){return x.render(t,e,r)},t.to_html=function(e,r,n,o){var i=t.render(e,r,n);return"function"!=typeof o?i:void o(i)}});var dateFormat=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,n=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t};return function(o,i,s){var a=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(o)||/\d/.test(o)||(i=o,o=void 0),o=o?new Date(o):new Date,isNaN(o))throw SyntaxError("invalid date");i=String(a.masks[i]||i||a.masks["default"]),"UTC:"==i.slice(0,4)&&(i=i.slice(4),s=!0);var u=s?"getUTC":"get",l=o[u+"Date"](),h=o[u+"Day"](),c=o[u+"Month"](),p=o[u+"FullYear"](),d=o[u+"Hours"](),f=o[u+"Minutes"](),m=o[u+"Seconds"](),g=o[u+"Milliseconds"](),v=s?0:o.getTimezoneOffset(),y={d:l,dd:n(l),ddd:a.i18n.dayNames[h],dddd:a.i18n.dayNames[h+7],m:c+1,mm:n(c+1),mmm:a.i18n.monthNames[c],mmmm:a.i18n.monthNames[c+12],yy:String(p).slice(2),yyyy:p,h:d%12||12,hh:n(d%12||12),H:d,HH:n(d),M:f,MM:n(f),s:m,ss:n(m),l:n(g,3),L:n(g>99?Math.round(g/10):g),t:12>d?"a":"p",tt:12>d?"am":"pm",T:12>d?"A":"P",TT:12>d?"AM":"PM",Z:s?"UTC":(String(o).match(e)||[""]).pop().replace(r,""),o:(v>0?"-":"+")+n(100*Math.floor(Math.abs(v)/60)+Math.abs(v)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10]};return i.replace(t,function(t){return t in y?y[t]:t.slice(1,t.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(t,e){return dateFormat(this,t,e)},function(t,e){"object"==typeof exports?module.exports=e(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],e):t.URI=e(t.punycode,t.IPv6,t.SecondLevelDomains,t)}(this,function(t,e,r,n){"use strict";function o(t,e){return this instanceof o?(void 0===t&&(t="undefined"!=typeof location?location.href+"":""),this.href(t),void 0!==e?this.absoluteTo(e):this):new o(t,e)}function i(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function a(t){return"Array"===s(t)}function u(t,e){var r,n,o={};if(a(e))for(r=0,n=e.length;n>r;r++)o[e[r]]=!0;else o[e]=!0;for(r=0,n=t.length;n>r;r++)void 0!==o[t[r]]&&(t.splice(r,1),n--,r--);return t}function l(t,e){var r,n;if(a(e)){for(r=0,n=e.length;n>r;r++)if(!l(t,e[r]))return!1;return!0}var o=s(e);for(r=0,n=t.length;n>r;r++)if("RegExp"===o){if("string"==typeof t[r]&&t[r].match(e))return!0}else if(t[r]===e)return!0;return!1}function h(t,e){if(!a(t)||!a(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var r=0,n=t.length;n>r;r++)if(t[r]!==e[r])return!1;return!0}function c(t){return escape(t)}function p(t){return encodeURIComponent(t).replace(/[!'()*]/g,c).replace(/\*/g,"%2A")}var d=n&&n.URI,f=o.prototype,m=Object.prototype.hasOwnProperty;o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9-+-]*$/i,o.idn_expression=/[^a-z0-9\.-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/gi,o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},o.getDomAttribute=function(t){if(!t||!t.nodeName)return void 0;var e=t.nodeName.toLowerCase();return"input"===e&&"image"!==t.type?void 0:o.domAttributes[e]},o.encode=p,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=p,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},o.encodeQuery=function(t,e){var r=o.encode(t+"");return e?r.replace(/%20/g,"+"):r},o.decodeQuery=function(t,e){t+="";try{return o.decode(e?t.replace(/\+/g,"%20"):t)}catch(r){return t}},o.recodePath=function(t){for(var e=(t+"").split("/"),r=0,n=e.length;n>r;r++)e[r]=o.encodePathSegment(o.decode(e[r]));return e.join("/")},o.decodePath=function(t){for(var e=(t+"").split("/"),r=0,n=e.length;n>r;r++)e[r]=o.decodePathSegment(e[r]);return e.join("/")};var g,v={encode:"encode",decode:"decode"},y=function(t,e){return function(r){return o[e](r+"").replace(o.characters[t][e].expression,function(r){return o.characters[t][e].map[r]})}};for(g in v)o[g+"PathSegment"]=y("pathname",v[g]);o.encodeReserved=y("reserved","encode"),o.parse=function(t,e){var r;return e||(e={}),r=t.indexOf("#"),r>-1&&(e.fragment=t.substring(r+1)||null,t=t.substring(0,r)),r=t.indexOf("?"),r>-1&&(e.query=t.substring(r+1)||null,t=t.substring(0,r)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=o.parseAuthority(t,e)):(r=t.indexOf(":"),r>-1&&(e.protocol=t.substring(0,r)||null,e.protocol&&!e.protocol.match(o.protocol_expression)?e.protocol=void 0:"file"===e.protocol?t=t.substring(r+3):"//"===t.substring(r+1,r+3)?(t=t.substring(r+3),t=o.parseAuthority(t,e)):(t=t.substring(r+1),e.urn=!0))),e.path=t,e},o.parseHost=function(t,e){var r,n,o=t.indexOf("/");return-1===o&&(o=t.length),"["===t.charAt(0)?(r=t.indexOf("]"),e.hostname=t.substring(1,r)||null,e.port=t.substring(r+2,o)||null):t.indexOf(":")!==t.lastIndexOf(":")?(e.hostname=t.substring(0,o)||null,e.port=null):(n=t.substring(0,o).split(":"),e.hostname=n[0]||null,e.port=n[1]||null),e.hostname&&"/"!==t.substring(o).charAt(0)&&(o++,t="/"+t),t.substring(o)||"/"},o.parseAuthority=function(t,e){return t=o.parseUserinfo(t,e),o.parseHost(t,e)},o.parseUserinfo=function(t,e){var r,n=t.indexOf("/"),i=n>-1?t.lastIndexOf("@",n):t.indexOf("@");return i>-1&&(-1===n||n>i)?(r=t.substring(0,i).split(":"),e.username=r[0]?o.decode(r[0]):null,r.shift(),e.password=r[0]?o.decode(r.join(":")):null,t=t.substring(i+1)):(e.username=null,e.password=null),t},o.parseQuery=function(t,e){if(!t)return{};if(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!t)return{};for(var r,n,i,s={},a=t.split("&"),u=a.length,l=0;u>l;l++)r=a[l].split("="),n=o.decodeQuery(r.shift(),e),i=r.length?o.decodeQuery(r.join("="),e):null,s[n]?("string"==typeof s[n]&&(s[n]=[s[n]]),s[n].push(i)):s[n]=i;return s},o.build=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=o.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},o.buildHost=function(t){var e="";return t.hostname?(o.ip6_expression.test(t.hostname)?e+=t.port?"["+t.hostname+"]:"+t.port:t.hostname:(e+=t.hostname,t.port&&(e+=":"+t.port)),e):""},o.buildAuthority=function(t){return o.buildUserinfo(t)+o.buildHost(t)},o.buildUserinfo=function(t){var e="";return t.username&&(e+=o.encode(t.username),t.password&&(e+=":"+o.encode(t.password)),e+="@"),e},o.buildQuery=function(t,e,r){var n,i,s,u,l="";for(i in t)if(m.call(t,i)&&i)if(a(t[i]))for(n={},s=0,u=t[i].length;u>s;s++)void 0!==t[i][s]&&void 0===n[t[i][s]+""]&&(l+="&"+o.buildQueryParameter(i,t[i][s],r),e!==!0&&(n[t[i][s]+""]=!0));else void 0!==t[i]&&(l+="&"+o.buildQueryParameter(i,t[i],r));return l.substring(1)},o.buildQueryParameter=function(t,e,r){return o.encodeQuery(t,r)+(null!==e?"="+o.encodeQuery(e,r):"")},o.addQuery=function(t,e,r){if("object"==typeof e)for(var n in e)m.call(e,n)&&o.addQuery(t,n,e[n]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=r);"string"==typeof t[e]&&(t[e]=[t[e]]),a(r)||(r=[r]),t[e]=t[e].concat(r)}},o.removeQuery=function(t,e,r){var n,i,s;if(a(e))for(n=0,i=e.length;i>n;n++)t[e[n]]=void 0;else if("object"==typeof e)for(s in e)m.call(e,s)&&o.removeQuery(t,s,e[s]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==r?t[e]===r?t[e]=void 0:a(t[e])&&(t[e]=u(t[e],r)):t[e]=void 0}},o.hasQuery=function(t,e,r,n){if("object"==typeof e){for(var i in e)if(m.call(e,i)&&!o.hasQuery(t,i,e[i]))return!1;return!0}if("string"!=typeof e)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(s(r)){case"Undefined":return e in t;case"Boolean":var u=Boolean(a(t[e])?t[e].length:t[e]);return r===u;case"Function":return!!r(t[e],e,t);case"Array":if(!a(t[e]))return!1;var c=n?l:h;return c(t[e],r);case"RegExp":return a(t[e])?n?l(t[e],r):!1:Boolean(t[e]&&t[e].match(r));case"Number":r=String(r);case"String":return a(t[e])?n?l(t[e],r):!1:t[e]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.commonPath=function(t,e){var r,n=Math.min(t.length,e.length);for(r=0;n>r;r++)if(t.charAt(r)!==e.charAt(r)){r--;break}return 1>r?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":(("/"!==t.charAt(r)||"/"!==e.charAt(r))&&(r=t.substring(0,r).lastIndexOf("/")),t.substring(0,r+1))
},o.withinString=function(t,e){return t.replace(o.find_uri_expression,e)},o.ensureValidHostname=function(e){if(e.match(o.invalid_hostname_characters)){if(!t)throw new TypeError("Hostname '"+e+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(t.toASCII(e).match(o.invalid_hostname_characters))throw new TypeError("Hostname '"+e+"' contains characters other than [A-Z0-9.-]")}},o.noConflict=function(t){if(t){var r={URI:this.noConflict()};return URITemplate&&"function"==typeof URITemplate.noConflict&&(r.URITemplate=URITemplate.noConflict()),e&&"function"==typeof e.noConflict&&(r.IPv6=e.noConflict()),SecondLevelDomains&&"function"==typeof SecondLevelDomains.noConflict&&(r.SecondLevelDomains=SecondLevelDomains.noConflict()),r}return n.URI===this&&(n.URI=d),this},f.build=function(t){return t===!0?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},f.clone=function(){return new o(this)},f.valueOf=f.toString=function(){return this.build(!1)._string},v={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},y=function(t){return function(e,r){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!r),this)}};for(g in v)f[g]=y(v[g]);v={query:"?",fragment:"#"},y=function(t,e){return function(r,n){return void 0===r?this._parts[t]||"":(null!==r&&(r+="",r.charAt(0)===e&&(r=r.substring(1))),this._parts[t]=r,this.build(!n),this)}};for(g in v)f[g]=y(g,v[g]);v={search:["?","query"],hash:["#","fragment"]},y=function(t,e){return function(r,n){var o=this[t](r,n);return"string"==typeof o&&o.length?e+o:o}};for(g in v)f[g]=y(v[g][1],v[g][0]);f.pathname=function(t,e){if(void 0===t||t===!0){var r=this._parts.path||(this._parts.hostname?"/":"");return t?o.decodePath(r):r}return this._parts.path=t?o.recodePath(t):"/",this.build(!e),this},f.path=f.pathname,f.href=function(t,e){var r;if(void 0===t)return this.toString();this._string="",this._parts=o._parts();var n=t instanceof o,i="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName){var s=o.getDomAttribute(t);t=t[s]||"",i=!1}if(!n&&i&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t)this._parts=o.parse(t,this._parts);else{if(!n&&!i)throw new TypeError("invalid input");var a=n?t._parts:t;for(r in a)m.call(this._parts,r)&&(this._parts[r]=a[r])}return this.build(!e),this},f.is=function(t){var e=!1,n=!1,i=!1,s=!1,a=!1,u=!1,l=!1,h=!this._parts.urn;switch(this._parts.hostname&&(h=!1,n=o.ip4_expression.test(this._parts.hostname),i=o.ip6_expression.test(this._parts.hostname),e=n||i,s=!e,a=s&&r&&r.has(this._parts.hostname),u=s&&o.idn_expression.test(this._parts.hostname),l=s&&o.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return h;case"absolute":return!h;case"domain":case"name":return s;case"sld":return a;case"ip":return e;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return i;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return l}return null};var b=f.protocol,_=f.port,w=f.hostname;f.protocol=function(t,e){if(void 0!==t&&t&&(t=t.replace(/:(\/\/)?$/,""),t.match(/[^a-zA-z0-9\.+-]/)))throw new TypeError("Protocol '"+t+"' contains characters other than [A-Z0-9.+-]");return b.call(this,t,e)},f.scheme=f.protocol,f.port=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(t+="",":"===t.charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError("Port '"+t+"' contains characters other than [0-9]");return _.call(this,t,e)},f.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var r={};o.parseHost(t,r),t=r.hostname}return w.call(this,t,e)},f.host=function(t,e){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?o.buildHost(this._parts):"":(o.parseHost(t,this._parts),this.build(!e),this)},f.authority=function(t,e){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?o.buildAuthority(this._parts):"":(o.parseAuthority(t,this._parts),this.build(!e),this)},f.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.username)return"";var r=o.buildUserinfo(this._parts);return r.substring(0,r.length-1)}return"@"!==t[t.length-1]&&(t+="@"),o.parseUserinfo(t,this._parts),this.build(!e),this},f.resource=function(t,e){var r;return void 0===t?this.path()+this.search()+this.hash():(r=o.parse(t),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!e),this)},f.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var n=this._parts.hostname.length-this.domain().length,s=this._parts.hostname.substring(0,n),a=new RegExp("^"+i(s));return t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&o.ensureValidHostname(t),this._parts.hostname=this._parts.hostname.replace(a,t),this.build(!e),this},f.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var n=this._parts.hostname.length-this.tld(e).length-1;return n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||""}if(!t)throw new TypeError("cannot set domain empty");if(o.ensureValidHostname(t),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var s=new RegExp(i(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(s,t)}return this.build(!e),this},f.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(n+1);return e!==!0&&r&&r.list[o.toLowerCase()]?r.get(this._parts.hostname)||o:o}var s;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(t))throw new TypeError("TLD '"+t+"' contains characters other than [A-Z0-9]");s=new RegExp(i(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");s=new RegExp(i(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,t)}return this.build(!e),this},f.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return t?o.decodePath(n):n}var s=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,s),u=new RegExp("^"+i(a));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=o.recodePath(t),this._parts.path=this._parts.path.replace(u,t),this.build(!e),this},f.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(r+1);return t?o.decodePathSegment(n):n}var s=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(s=!0);var a=new RegExp(i(this.filename())+"$");return t=o.recodePath(t),this._parts.path=this._parts.path.replace(a,t),s?this.normalizePath(e):this.build(!e),this},f.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||t===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r,n,s=this.filename(),a=s.lastIndexOf(".");return-1===a?"":(r=s.substring(a+1),n=/^[a-z0-9%]+$/i.test(r)?r:"",t?o.decodePathSegment(n):n)}"."===t.charAt(0)&&(t=t.substring(1));var u,l=this.suffix();if(l)u=new RegExp(t?i(l)+"$":i("."+l)+"$");else{if(!t)return this;this._parts.path+="."+o.recodePath(t)}return u&&(t=o.recodePath(t),this._parts.path=this._parts.path.replace(u,t)),this.build(!e),this},f.segment=function(t,e,r){var n=this._parts.urn?":":"/",o=this.path(),i="/"===o.substring(0,1),s=o.split(n);if(void 0!==t&&"number"!=typeof t&&(r=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error("Bad segment '"+t+"', must be 0-based integer");if(i&&s.shift(),0>t&&(t=Math.max(s.length+t,0)),void 0===e)return void 0===t?s:s[t];if(null===t||void 0===s[t])if(a(e)){s=[];for(var u=0,l=e.length;l>u;u++)(e[u].length||s.length&&s[s.length-1].length)&&(s.length&&!s[s.length-1].length&&s.pop(),s.push(e[u]))}else(e||"string"==typeof e)&&(""===s[s.length-1]?s[s.length-1]=e:s.push(e));else e||"string"==typeof e&&e.length?s[t]=e:s.splice(t,1);return i&&s.unshift(""),this.path(s.join(n),r)},f.segmentCoded=function(t,e,r){var n,i,s;if("number"!=typeof t&&(r=e,e=t,t=void 0),void 0===e){if(n=this.segment(t,e,r),a(n))for(i=0,s=n.length;s>i;i++)n[i]=o.decode(n[i]);else n=void 0!==n?o.decode(n):void 0;return n}if(a(e))for(i=0,s=e.length;s>i;i++)e[i]=o.decode(e[i]);else e="string"==typeof e?o.encode(e):e;return this.segment(t,e,r)};var S=f.query;return f.query=function(t,e){if(t===!0)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var r=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),n=t.call(this,r);return this._parts.query=o.buildQuery(n||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=o.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):S.call(this,t,e)},f.setQuery=function(t,e,r){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof t)for(var i in t)m.call(t,i)&&(n[i]=t[i]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");n[t]=void 0!==e?e:null}return this._parts.query=o.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},f.addQuery=function(t,e,r){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(n,t,void 0===e?null:e),this._parts.query=o.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},f.removeQuery=function(t,e,r){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(n,t,e),this._parts.query=o.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},f.hasQuery=function(t,e,r){var n=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(n,t,e,r)},f.setSearch=f.setQuery,f.addSearch=f.addQuery,f.removeSearch=f.removeQuery,f.hasSearch=f.hasQuery,f.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},f.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},f.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},f.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},f.normalizePath=function(t){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var e,r,n,i=this._parts.path;for("/"!==i.charAt(0)&&(e=!0,i="/"+i),i=i.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");;){if(r=i.indexOf("/../"),-1===r)break;if(0===r){i=i.substring(3);break}n=i.substring(0,r).lastIndexOf("/"),-1===n&&(n=r),i=i.substring(0,n)+i.substring(r+3)}return e&&this.is("relative")&&(i=i.substring(1)),i=o.recodePath(i),this._parts.path=i,this.build(!t),this},f.normalizePathname=f.normalizePath,f.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},f.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},f.normalizeSearch=f.normalizeQuery,f.normalizeHash=f.normalizeFragment,f.iso8859=function(){var t=o.encode,e=o.decode;return o.encode=escape,o.decode=decodeURIComponent,this.normalize(),o.encode=t,o.decode=e,this},f.unicode=function(){var t=o.encode,e=o.decode;return o.encode=p,o.decode=unescape,this.normalize(),o.encode=t,o.decode=e,this},f.readable=function(){var e=this.clone();e.username("").password("").normalize();var r="";if(e._parts.protocol&&(r+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(r+=t.toUnicode(e._parts.hostname),e._parts.port&&(r+=":"+e._parts.port)):r+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(r+="/"),r+=e.path(!0),e._parts.query){for(var n="",i=0,s=e._parts.query.split("&"),a=s.length;a>i;i++){var u=(s[i]||"").split("=");n+="&"+o.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==u[1]&&(n+="="+o.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+n.substring(1)}return r+=o.decodeQuery(e.hash(),!0)},f.absoluteTo=function(t){var e,r,n,i=this.clone(),s=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof o||(t=new o(t)),i._parts.protocol||(i._parts.protocol=t._parts.protocol),this._parts.hostname)return i;for(r=0;n=s[r];r++)i._parts[n]=t._parts[n];for(s=["query","path"],r=0;n=s[r];r++)!i._parts[n]&&t._parts[n]&&(i._parts[n]=t._parts[n]);return"/"!==i.path().charAt(0)&&(e=t.directory(),i._parts.path=(e?e+"/":"")+i._parts.path,i.normalizePath()),i.build(),i},f.relativeTo=function(t){var e,r,n,i,s,a=this.clone().normalize();if(a._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new o(t).normalize(),e=a._parts,r=t._parts,i=a.path(),s=t.path(),"/"!==i.charAt(0))throw new Error("URI is already relative");if("/"!==s.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===r.protocol&&(e.protocol=null),e.username!==r.username||e.password!==r.password)return a.build();if(null!==e.protocol||null!==e.username||null!==e.password)return a.build();if(e.hostname!==r.hostname||e.port!==r.port)return a.build();if(e.hostname=null,e.port=null,i===s)return e.path="",a.build();if(n=o.commonPath(a.path(),t.path()),!n)return a.build();var u=r.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=u+e.path.substring(n.length),a.build()},f.equals=function(t){var e,r,n,i=this.clone(),s=new o(t),u={},l={},c={};if(i.normalize(),s.normalize(),i.toString()===s.toString())return!0;if(e=i.query(),r=s.query(),i.query(""),s.query(""),i.toString()!==s.toString())return!1;if(e.length!==r.length)return!1;u=o.parseQuery(e,this._parts.escapeQuerySpace),l=o.parseQuery(r,this._parts.escapeQuerySpace);for(n in u)if(m.call(u,n)){if(a(u[n])){if(!h(u[n],l[n]))return!1}else if(u[n]!==l[n])return!1;c[n]=!0}for(n in l)if(m.call(l,n)&&!c[n])return!1;return!0},f.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},f.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},o}),function(t){var e=function(t){var e,r=Array.prototype.slice;return function(){var n=r.call(arguments),o=this;clearTimeout(e),e=setTimeout(function(){t.apply(o,n)},100)}},r=function(t){var e=t.match(/(\d+)/g);return new Date(e[0],e[1]-1,e[2])},n=function(){function n(e,r){this.$elem=e,this.$results=t(r.results),this.$entries=t(r.entries,this.$results),this.indexDataUrl=r.indexUrl,this.index=this.createIndex(),this.template=this.compileTemplate(t(r.template)),this.initialize()}return n.prototype.initialize=function(){var t=this;this.loadIndexData(function(e){t.populateIndex(e),t.populateSearchFromQuery(),t.bindKeypress()})},n.prototype.createIndex=function(){return lunr(function(){this.field("title",{boost:10}),this.field("body"),this.ref("id")})},n.prototype.compileTemplate=function(t){return Mustache.compile(t.text())},n.prototype.loadIndexData=function(e){t.getJSON(this.indexDataUrl,e)},n.prototype.populateIndex=function(e){var r=this.index;this.entries=t.map(e.entries,this.createEntry),t.each(this.entries,function(t,e){r.add(e)})},n.prototype.createEntry=function(e,n){var o=t.extend({id:n+1},e);return e.date&&t.extend(o,{date:r(e.date),pubdate:function(){return dateFormat(r(e.date),"yyyy-mm-dd")},displaydate:function(){return dateFormat(r(e.date),"mmm dd, yyyy")}}),o},n.prototype.bindKeypress=function(){var r=this;this.$elem.bind("keyup",e(function(){r.search(t(this).val())}))},n.prototype.search=function(e){var r=this.entries;if(e.length<=2)this.$results.hide(),this.$entries.empty();else{var n=t.map(this.index.search(e),function(e){return t.grep(r,function(t){return t.id===parseInt(e.ref,10)})[0]});this.displayResults(n)}},n.prototype.displayResults=function(t){var e=this.$entries,r=this.$results;e.empty(),e.append(0===t.length?"<p>Nothing found.</p>":this.template({entries:t})),r.show()},n.prototype.populateSearchFromQuery=function(){var t=new URI(window.location.search.toString()),e=t.search(!0);e.hasOwnProperty("q")&&(this.$elem.val(e.q),this.search(e.q.toString()))},n}();t.fn.lunrSearch=function(e){return e=t.extend({},t.fn.lunrSearch.defaults,e),new n(this,e),this},t.fn.lunrSearch.defaults={indexUrl:"/search.json",results:"#search-results",entries:".entries",template:"#search-results-template"}}(jQuery),$(function(){$("#search-query").lunrSearch({indexUrl:"/search.json",results:"#search-results",entries:".search-results-list",template:"#search-results-template"})}),function(){!function(t){return t.bigfoot=function(e){var r,n,o,i,s,a,u,l,h,c,p,d,f,m,g,v,y,b,_,w,S,x,T,k,O,F,E;return o=void 0,h={actionOriginalFN:"hide",activateCallback:function(){},activateOnHover:!1,allowMultipleFN:!1,anchorPattern:/(fn|footnote|note)[:\-_\d]/gi,anchorParentTagname:"sup",breakpoints:{},deleteOnUnhover:!1,footnoteParentClass:"footnote",footnoteTagname:"li",hoverDelay:250,numberResetSelector:void 0,popoverDeleteDelay:300,popoverCreateDelay:100,positionContent:!0,preventPageScroll:!0,scope:!1,useFootnoteOnlyOnce:!0,contentMarkup:'<aside class="bigfoot-footnote is-positioned-bottom" data-footnote-number="{{FOOTNOTENUM}}" data-footnote-identifier="{{FOOTNOTEID}}" alt="Footnote {{FOOTNOTENUM}}"> <div class="bigfoot-footnote__wrapper"> <div class="bigfoot-footnote__content"> {{FOOTNOTECONTENT}} </div></div> <div class="bigfoot-footnote__tooltip"></div> </aside>',buttonMarkup:'<div class=\'bigfoot-footnote__container\'> <button class="bigfoot-footnote__button" id="{{SUP:data-footnote-backlink-ref}}" data-footnote-number="{{FOOTNOTENUM}}" data-footnote-identifier="{{FOOTNOTEID}}" alt="See Footnote {{FOOTNOTENUM}}" rel="footnote" data-bigfoot-footnote="{{FOOTNOTECONTENT}}"> <svg class="bigfoot-footnote__button__circle" viewbox="0 0 6 6" preserveAspectRatio="xMinYMin"><circle r="3" cx="3" cy="3" fill="white"></circle></svg> <svg class="bigfoot-footnote__button__circle" viewbox="0 0 6 6" preserveAspectRatio="xMinYMin"><circle r="3" cx="3" cy="3" fill="white"></circle></svg> <svg class="bigfoot-footnote__button__circle" viewbox="0 0 6 6" preserveAspectRatio="xMinYMin"><circle r="3" cx="3" cy="3" fill="white"></circle></svg> </button></div>'},T=t.extend(h,e),g={},d=function(){var e,r,n,o,i,s,u,l,h,p,d,f,m,g,v,b,_,S,x,k;for(d=T.scope?""+T.scope+' a[href*="#"]':'a[href*="#"]',n=t(d).filter(function(){var e,r;return e=t(this),r=e.attr("rel"),("null"===r||null==r)&&(r=""),(""+e.attr("href")+r).match(T.anchorPattern)&&e.closest("[class*="+T.footnoteParentClass+"]:not(a):not("+T.anchorParentTagname+")").length<1}),b=[],g=[],h=[],a(n,g),t(g).each(function(){var e,r;return r=t(this).data("footnote-ref").replace(/[:.+~*\]\[]/g,"\\$&"),T.useFootnoteOnlyOnce&&(r=""+r+":not(.footnote-processed)"),e=t(r).closest(T.footnoteTagname),e.length>0?(b.push(e.first().addClass("footnote-processed")),h.push(this)):void 0}),r=t("[data-footnote-identifier]:last"),m=r.length<1?0:+r.data("footnote-identifier"),k=[],_=S=0,x=b.length;x>=0?x>S:S>x;_=x>=0?++S:--S)switch(f=y(t(b[_]).html().trim(),t(h[_]).data("footnote-backlink-ref")),f=f.replace(/"/g,"&quot;").replace(/&lt;/g,"&ltsym;").replace(/&gt;/g,"&gtsym;"),m+=1,p="",u=t(h[_]),l=t(b[_]),null!=T.numberResetSelector?(e=u.closest(T.numberResetSelector),e.is(i)?v+=1:v=1,i=e):v=m,0!==f.indexOf("<")&&(f="<p>"+f+"</p>"),p=T.buttonMarkup.replace(/\{\{FOOTNOTENUM\}\}/g,v).replace(/\{\{FOOTNOTEID\}\}/g,m).replace(/\{\{FOOTNOTECONTENT\}\}/g,f),p=w(p,"SUP",u),p=w(p,"FN",l),o=t(p).insertBefore(u),s=l.parent(),T.actionOriginalFN.toLowerCase()){case"hide":u.addClass("footnote-print-only"),l.addClass("footnote-print-only"),k.push(c(s));break;case"delete":u.remove(),l.remove(),k.push(c(s));break;default:k.push(u.addClass("footnote-print-only"))}return k},a=function(e,r){var n,o,i,s;null==r&&(r=[]),n=void 0,o=void 0,i=void 0,s=void 0,e.each(function(){var e,o;return o=t(this),i="#"+o.attr("href").split("#")[1],n=o.closest(T.anchorParentTagname),e=o.find(T.anchorParentTagname),n.length>0?(s=(n.attr("id")||"")+(o.attr("id")||""),r.push(n.attr({"data-footnote-backlink-ref":s,"data-footnote-ref":i}))):e.length>0?(s=(e.attr("id")||"")+(o.attr("id")||""),r.push(o.attr({"data-footnote-backlink-ref":s,"data-footnote-ref":i}))):(s=o.attr("id")||"",r.push(o.attr({"data-footnote-backlink-ref":s,"data-footnote-ref":i})))})},c=function(t){var e;return e=void 0,t.is(":empty")||0===t.children(":not(.footnote-print-only)").length?(e=t.parent(),"delete"===T.actionOriginalFN.toLowerCase()?t.remove():t.addClass("footnote-print-only"),c(e)):t.children(":not(.footnote-print-only)").length===t.children("hr:not(.footnote-print-only)").length?(e=t.parent(),"delete"===T.actionOriginalFN.toLowerCase()?t.remove():(t.children("hr").addClass("footnote-print-only"),t.addClass("footnote-print-only")),c(e)):void 0},y=function(t,e){var r;return e.indexOf(" ")>=0&&(e=e.trim().replace(/\s+/g,"|").replace(/(.*)/g,"($1)")),r=new RegExp("(\\s|&nbsp;)*<\\s*a[^#<]*#"+e+"[^>]*>(.*?)<\\s*/\\s*a>","g"),t.replace(r,"").replace("[]","")},w=function(t,e,r){var n,o,i,s;for(o=new RegExp("\\{\\{"+e+":([^\\}]*)\\}\\}","g"),n=void 0,s=void 0,i=void 0,n=o.exec(t);n;)n[1]&&(s=r.attr(n[1])||"",t=t.replace("{{"+e+":"+n[1]+"}}",s)),n=o.exec(t);return t},i=function(e){var r,n,o;if(T.activateOnHover){if(r=t(e.target).closest(".bigfoot-footnote__button"),n='[data-footnote-identifier="'+r.attr("data-footnote-identifier")+'"]',r.hasClass("is-active"))return;r.addClass("is-hover-instantiated"),T.allowMultipleFN||(o=".bigfoot-footnote:not("+n+")",_(o)),l(".bigfoot-footnote__button"+n).addClass("is-hover-instantiated")}},k=function(e){var r,n,o;o=t(e.target),r=o.closest(".bigfoot-footnote__button"),n=o.closest(".bigfoot-footnote"),r.length>0?(e.preventDefault(),u(r)):n.length<1&&t(".bigfoot-footnote").length>0&&_()},u=function(t){var e;t.blur(),e='data-footnote-identifier="'+t.attr("data-footnote-identifier")+'"',t.hasClass("changing")||(t.hasClass("is-active")?T.allowMultipleFN?_(".bigfoot-footnote["+e+"]"):_():(t.addClass("changing"),setTimeout(function(){return t.removeClass("changing")},T.popoverCreateDelay),l(".bigfoot-footnote__button["+e+"]"),t.addClass("is-click-instantiated"),T.allowMultipleFN||_(".bigfoot-footnote:not(["+e+"])")))},l=function(e){var r,n;return r=void 0,r="string"!=typeof e&&T.allowMultipleFN?e:"string"!=typeof e?e.first():T.allowMultipleFN?t(e).closest(".bigfoot-footnote__button"):t(e+":first").closest(".bigfoot-footnote__button"),n=t(),r.each(function(){var e,o,i,a;i=t(this),a=void 0;try{return a=T.contentMarkup.replace(/\{\{FOOTNOTENUM\}\}/g,i.attr("data-footnote-number")).replace(/\{\{FOOTNOTEID\}\}/g,i.attr("data-footnote-identifier")).replace(/\{\{FOOTNOTECONTENT\}\}/g,i.attr("data-bigfoot-footnote")).replace(/\&gtsym\;/g,"&gt;").replace(/\&ltsym\;/g,"&lt;"),a=w(a,"BUTTON",i)}finally{e=t(a);try{T.activateCallback(e,i)}catch(u){}e.insertAfter(r),g[i.attr("data-footnote-identifier")]="init",e.attr("bigfoot-max-width",s(e.css("max-width"),e)),e.css("max-width",1e4),o=e.find(".bigfoot-footnote__content"),e.attr("data-bigfoot-max-height",s(o.css("max-height"),o)),S(),i.addClass("is-active"),e.find(".bigfoot-footnote__content").bindScrollHandler(),n=n.add(e)}}),setTimeout(function(){return n.addClass("is-active")},T.popoverCreateDelay),n},n=function(){var t,e;return t=document.createElement("div"),t.style.cssText="display:inline-block;padding:0;line-height:1;position:absolute;visibility:hidden;font-size:1em;",t.appendChild(document.createElement("M")),document.body.appendChild(t),e=t.offsetHeight,document.body.removeChild(t),e},s=function(t,e){return"none"===t?t=1e4:t.indexOf("rem")>=0?t=parseFloat(t)*n():t.indexOf("em")>=0?t=parseFloat(t)*parseFloat(e.css("font-size")):t.indexOf("px")>=0?(t=parseFloat(t),60>=t&&(t/=parseFloat(e.parent().css("width")))):t.indexOf("%")>=0&&(t=parseFloat(t)/100),t},t.fn.bindScrollHandler=function(){return T.preventPageScroll?(t(this).on("DOMMouseScroll mousewheel",function(e){var r,n,o,i,s,a,u,l;return n=t(this),u=n.scrollTop(),a=n[0].scrollHeight,i=parseInt(n.css("height")),r=n.closest(".bigfoot-footnote"),n.scrollTop()>0&&n.scrollTop()<10&&r.addClass("is-scrollable"),r.hasClass("is-scrollable")?(o="DOMMouseScroll"===e.type?-40*e.originalEvent.detail:e.originalEvent.wheelDelta,l=o>0,s=function(){return e.stopPropagation(),e.preventDefault(),e.returnValue=!1,!1},!l&&-o>a-i-u?(n.scrollTop(a),r.addClass("is-fully-scrolled"),s()):l&&o>u?(n.scrollTop(0),r.removeClass("is-fully-scrolled"),s()):r.removeClass("is-fully-scrolled")):void 0}),t(this)):t(this)},O=function(e){return T.deleteOnUnhover&&T.activateOnHover?setTimeout(function(){var r;return r=t(e.target).closest(".bigfoot-footnote, .bigfoot-footnote__button"),t(".bigfoot-footnote__button:hover, .bigfoot-footnote:hover").length<1?_():void 0},T.hoverDelay):void 0},p=function(t){return 27===t.keyCode?_():void 0},_=function(e,r){var n,o,i,s;return null==e&&(e=".bigfoot-footnote"),null==r&&(r=T.popoverDeleteDelay),n=t(),s=void 0,o=void 0,i=void 0,t(e).each(function(){return i=t(this),s=i.attr("data-footnote-identifier"),o=t('.bigfoot-footnote__button[data-footnote-identifier="'+s+'"]'),o.hasClass("changing")?void 0:(n=n.add(o),o.removeClass("is-active is-hover-instantiated is-click-instantiated").addClass("changing"),i.removeClass("is-active").addClass("disapearing"),setTimeout(function(){return i.remove(),delete g[s],o.removeClass("changing")},r))}),n},S=function(e){var r;T.positionContent&&(r=e?e.type:"resize",t(".bigfoot-footnote").each(function(){var e,n,o,i,s,a,u,l,h,c,p,d,f,m,y,b;return i=t(this),a=i.attr("data-footnote-identifier"),s='data-footnote-identifier="'+a+'"',n=i.find(".bigfoot-footnote__content"),e=i.siblings(".bigfoot-footnote__button"),y=x(e),l=parseFloat(i.css("margin-top")),h=+i.attr("data-bigfoot-max-height"),b=2*l+i.outerHeight(),c=1e4,f=y.bottomRoom<b&&y.topRoom>y.bottomRoom,u=g[a],f?("top"!==u&&(g[a]="top",i.addClass("is-positioned-top").removeClass("is-positioned-bottom"),i.css("transform-origin",100*y.leftRelative+"% 100%")),c=y.topRoom-l-15):(("bottom"!==u||"init"===u)&&(g[a]="bottom",i.removeClass("is-positioned-top").addClass("is-positioned-bottom"),i.css("transform-origin",100*y.leftRelative+"% 0%")),c=y.bottomRoom-l-15),i.find(".bigfoot-footnote__content").css({"max-height":Math.min(c,h)+"px"}),"resize"===r&&(d=parseFloat(i.attr("bigfoot-max-width")),o=i.find(".bigfoot-footnote__wrapper"),p=d,1>=d&&(m=function(){var e,r;return r=1e4,T.maxWidthRelativeTo&&(e=t(T.maxWidthRelativeTo),e.length>0&&(r=e.outerWidth())),Math.min(window.innerWidth,r)}(),p=m*d),p=Math.min(p,i.find(".bigfoot-footnote__content").outerWidth()+1),o.css("max-width",p+"px"),i.css({left:-y.leftRelative*p+parseFloat(e.css("margin-left"))+e.outerWidth()/2+"px"}),v(i,y.leftRelative)),parseInt(i.outerHeight())<i.find(".bigfoot-footnote__content")[0].scrollHeight?i.addClass("is-scrollable"):void 0}))},v=function(t,e){var r;null==e&&(e=.5),r=t.find(".bigfoot-footnote__tooltip"),r.length>0&&r.css("left",""+100*e+"%")},x=function(t){var e,r,n,o,i,s;return r=parseFloat(t.css("margin-left")),n=parseFloat(t.outerWidth())-r,e=parseFloat(t.outerHeight()),s=E(),i=t.offset().top-s.scrollY+e/2,o=t.offset().left-s.scrollX+n/2,{topRoom:i,bottomRoom:s.height-i,leftRoom:o,rightRoom:s.width-o,leftRelative:o/s.width,topRelative:i/s.height}},E=function(){return{width:window.innerWidth,height:window.innerHeight,scrollX:window.scrollX,scrollY:window.scrollY}},r=function(t,e,r,n,i){var s,a,u,l,h,c,p;return null==n&&(n=T.popoverDeleteDelay),null==i&&(i=!0),l=void 0,a=void 0,c=void 0,"string"==typeof t?(c="iphone"===t.toLowerCase()?"<320px":"ipad"===t.toLowerCase()?"<768px":t,a=">"===c.charAt(0)?"min":"<"===c.charAt(0)?"max":null,h=a?"("+a+"-width: "+c.substring(1)+")":c,l=window.matchMedia(h)):l=t,l.media&&"invalid"===l.media?{added:!1,mq:l,listener:null}:(p="min"===a,s="max"===a,e=e||m(i,n,p,function(t){return t.addClass("is-bottom-fixed")}),r=r||m(i,n,s,function(){}),u=function(t){t.matches?e(i,o):r(i,o)},l.addListener(u),u(l),T.breakpoints[t]={added:!0,mq:l,listener:u},T.breakpoints[t])},m=function(t,e,r,n){return function(t,o){var i;return i=void 0,t&&(i=o.close(),o.updateSetting("activateCallback",n)),setTimeout(function(){return o.updateSetting("positionContent",r),t?o.activate(i):void 0},e)}},b=function(t,e){var r,n,o,i;if(o=null,r=void 0,i=!1,"string"==typeof t)i=void 0!==T.breakpoints[t];else for(r in T.breakpoints)T.breakpoints.hasOwnProperty(r)&&T.breakpoints[r].mq===t&&(i=!0);return i&&(n=T.breakpoints[r||t],e?e({matches:!1}):n.listener({matches:!1}),n.mq.removeListener(n.listener),delete T.breakpoints[r||t]),i},F=function(t,e){var r,n;if(r=void 0,"string"==typeof t)r=T[t],T[t]=e;else{r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=T[n],T[n]=t[n])}return r},f=function(t){return T[t]},t(document).ready(function(){return d(),t(document).on("mouseenter",".bigfoot-footnote__button",i),t(document).on("touchend click",k),t(document).on("mouseout",".is-hover-instantiated",O),t(document).on("keyup",p),t(window).on("scroll resize",S),t(document).on("gestureend",function(){return S()})}),o={removePopovers:_,close:_,createPopover:l,activate:l,repositionFeet:S,reposition:S,addBreakpoint:r,removeBreakpoint:b,getSetting:f,updateSetting:F}}}(jQuery)}.call(this),$.bigfoot();